# Story 1.12: Analysis Generation

## Status
Complete

## Story
**As a** user who has extracted repository content,
**I want** Claude Code to analyze the content based on my specific needs,
**so that** I get actionable insights about installation, architecture, or implementation.

## Acceptance Criteria
1. User prompted for analysis type after extraction
2. Analysis type options: installation, workflow, architecture, custom
3. Claude Code reads extracted content from file
4. Analysis generated based on selected type with appropriate focus
5. Analysis displayed to user in readable format
6. Analysis quality appropriate for selected type (actionable, specific)
7. No manual implementation - relies on CLAUDE.md workflow instructions

## Tasks / Subtasks

- [x] **Task 1: Document analysis type prompting in CLAUDE.md** (AC: 1, 2)
  - [ ] Define Step 6 in workflow: Analysis Generation
  - [ ] Specify prompt text: "What type of analysis would you like?"
  - [ ] List options: installation, workflow, architecture, custom
  - [ ] Specify user input handling

- [x] **Task 2: Define analysis type specifications** (AC: 4, 6)
  - [ ] Document "installation" analysis focus:
    - Step-by-step setup instructions
    - Dependencies and requirements
    - Configuration needed
    - Common installation issues
  - [ ] Document "workflow" analysis focus:
    - How to use the library/tool
    - Common usage patterns
    - Code examples
    - Best practices
  - [ ] Document "architecture" analysis focus:
    - System design overview
    - Component relationships
    - Data flow
    - Key architectural patterns
  - [ ] Document "custom" analysis handling:
    - Prompt user for specific focus
    - Flexible analysis based on user request

- [x] **Task 3: Specify analysis quality criteria** (AC: 6)
  - [ ] Analysis uses specific details from extracted content
  - [ ] Actionable recommendations included
  - [ ] Concise but comprehensive (avoid overwhelming detail)
  - [ ] Code examples where relevant
  - [ ] Clear section organization

- [x] **Task 4: Document file reading workflow** (AC: 3)
  - [ ] Claude Code reads from extraction path
  - [ ] File path tracked in context variables
  - [ ] Content analyzed in full (already under token limit)

- [x] **Task 5: Document analysis display format** (AC: 5)
  - [ ] Markdown formatting for readability
  - [ ] Clear section headings
  - [ ] Code blocks for examples
  - [ ] Bullet points for lists

## Dev Notes

### Previous Story Insights
Dependencies:
- Story 1.9 (extract-full) - Extraction path available for reading
- Story 1.10 (extract-tree, extract-specific) - Selective extraction paths
- Story 1.11 (overflow prevention) - Ensures content under token limit

### Architecture Overview
This story defines the analysis generation workflow executed by Claude Code. Unlike other stories that involve Python implementation, this story documents the declarative workflow in CLAUDE.md that instructs Claude Code on how to analyze extracted content.

[Source: architecture.md#3.2 Claude Code Integration, prd.md#US5, #FR6]

### Analysis Types

**Installation Analysis:**
```
Focus:
- Prerequisites (Python version, system dependencies)
- Installation steps (pip install, git clone, etc.)
- Configuration (environment variables, config files)
- Verification (how to test installation worked)
- Common issues and troubleshooting

Quality Criteria:
- Step-by-step format (numbered list)
- Command examples for each step
- Explanation of what each step does
- Links to relevant sections in docs (if present)
```
[Source: prd.md#FR6]

**Workflow Analysis:**
```
Focus:
- Quick start example
- Common use cases with code examples
- API/CLI usage patterns
- Best practices
- Tips and tricks

Quality Criteria:
- Practical code examples
- Real-world scenarios
- Explanation of why/when to use patterns
- Reference to docs for deeper dive
```
[Source: prd.md#FR6]

**Architecture Analysis:**
```
Focus:
- System overview (high-level components)
- Component relationships (how parts interact)
- Data flow (input → processing → output)
- Key design patterns used
- Extension points for customization

Quality Criteria:
- Diagram-like description (ASCII or text-based)
- Clear explanation of responsibilities
- Identification of core abstractions
- Discussion of architectural decisions
```
[Source: prd.md#FR6]

**Custom Analysis:**
```
Focus:
- User-specified (prompt for details)
- Examples: "How does authentication work?", "Explain the CLI architecture", "What testing framework is used?"

Quality Criteria:
- Directly addresses user's question
- Uses extracted content as evidence
- Cites specific files/code when possible
```
[Source: prd.md#FR6]

### CLAUDE.md Workflow Step

```markdown
### Step 6: Analysis Generation

After extraction is complete and content is under token limit:

1. **Prompt user for analysis type:**
   Display: "What type of analysis would you like?"
   Options:
   - installation: Step-by-step setup guide
   - workflow: Usage patterns and examples
   - architecture: System design and components
   - custom: Specific focus (you will be prompted)

2. **If custom selected:**
   Prompt: "What would you like to analyze?"
   Accept free-form user input

3. **Read extracted content:**
   - File path available from previous step
   - Read entire file content
   - Content already verified under 200k tokens

4. **Generate analysis:**
   - Focus on selected analysis type
   - Use specific details from extracted content
   - Include code examples where relevant
   - Format as markdown with clear sections
   - Be actionable and concise

5. **Display analysis:**
   - Present complete analysis to user
   - Use markdown formatting
   - Clear section headings
   - Code blocks for examples

6. **Proceed to save prompt (Step 7)**
```
[Source: prd.md#FR6, architecture.md#3.2]

### Expected Workflow

```
[After extraction completes]

What type of analysis would you like?
  1. Installation
  2. Workflow
  3. Architecture
  4. Custom

Your choice: 1

[Claude Code reads data/fastapi/installation-content.txt]

# FastAPI - Installation Guide

## Prerequisites
- Python 3.7+
- pip package manager

## Installation Steps

1. **Install FastAPI**
   ```bash
   pip install fastapi
   ```
   This installs the FastAPI framework...

2. **Install ASGI Server**
   ```bash
   pip install "uvicorn[standard]"
   ```
   Uvicorn is needed to run FastAPI apps...

[... detailed analysis continues ...]
```
[Source: prd.md#US5, #FR6]

### Design Decisions

**Why no Python implementation:**
- Analysis generation is Claude Code's core capability
- CLAUDE.md provides declarative instructions
- No need for scripting (LLM generates text naturally)
- Implementation IS the analysis generation
[Source: architecture.md#3.2, prd.md#FR6]

**Why four standard types:**
- Covers most common use cases
- Installation: Most frequent need
- Workflow: Second most common
- Architecture: Deep dive option
- Custom: Flexibility for edge cases
[Source: prd.md#FR6, #2.2 Use Cases]

**Why read from file vs. passing content:**
- Content may be large (up to 200k tokens)
- File reading more reliable than parameter passing
- Claude Code handles file I/O natively
- Matches proven video workflow
[Source: architecture.md#3.2]

**Quality over speed:**
- Analysis should be thorough
- Better to take 30 seconds for good analysis
- Than 5 seconds for generic response
- User expects thoughtful insights
[Source: prd.md#FR6]

### File Location

**Modified in this story:**
- CLAUDE.md (add analysis generation workflow step)

**No Python code:**
- This story is purely declarative workflow documentation

[Source: architecture.md#3.2]

## Testing

### Testing Standards

**No unit tests for this story** - Analysis generation is Claude Code's responsibility, not Python code.

**Manual Testing Protocol:**
1. Extract repository content (any type: full, tree, specific)
2. Verify analysis type prompt appears
3. Select each analysis type (installation, workflow, architecture, custom)
4. Verify analysis quality:
   - Uses specific details from extracted content
   - Appropriate focus for selected type
   - Actionable recommendations
   - Code examples included
   - Readable markdown formatting
5. Verify analysis displayed completely
6. Verify workflow proceeds to save prompt

**Test Repositories:**
- Small repo (Hello-World): Test with full extraction → installation analysis
- Medium repo: Test with selective extraction → workflow analysis
- Large repo (FastAPI): Test with docs extraction → architecture analysis
- Any repo: Test custom analysis with specific question

[Source: prd.md#TR5 Testing Requirements]

### Success Criteria

**Functional Completeness:**
- [ ] CLAUDE.md workflow step documented
- [ ] Analysis type prompt specified
- [ ] Four analysis types defined
- [ ] Quality criteria documented
- [ ] File reading workflow specified
- [ ] Display format specified

**Manual Testing:**
- [ ] Installation analysis provides setup instructions
- [ ] Workflow analysis provides usage examples
- [ ] Architecture analysis explains system design
- [ ] Custom analysis addresses user question
- [ ] All analyses use extracted content
- [ ] Markdown formatting applied

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-29 | 1.0 | Initial story creation | Scrum Master (Bob) |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References
No issues - documentation-only story completed smoothly

### Completion Notes
**Implementation Summary:**
Story 1.12 is a documentation-only story defining analysis types and workflow for Claude Code to follow when analyzing extracted repository content. No Python code implementation required.

**Documentation Created:**
- Created CLAUDE_ANALYSIS_GUIDE.md (comprehensive analysis documentation)
- Defined 4 analysis types with detailed specifications:
  1. **Installation Analysis:** Prerequisites, step-by-step setup, configuration, troubleshooting
  2. **Workflow Analysis:** Quick start, use cases, best practices, code examples
  3. **Architecture Analysis:** System overview, components, data flow, design patterns
  4. **Custom Analysis:** User-specified focus with flexible analysis

**Key Documentation Sections:**
- Analysis type specifications with focus areas and quality criteria
- Example output structures for each type
- Analysis workflow (Step 6: Analysis Generation)
- Analysis quality guidelines and content organization principles
- Code example guidelines for clarity and usefulness

**Quality Guidelines Established:**
- Use specific details from extracted content
- Provide actionable recommendations
- Include relevant code examples
- Be concise but comprehensive
- Cite specific files when referencing implementation
- Format for readability with clear organization
- Prioritize practical, useful insights

**Manual Testing:**
Story 1.12 will be tested during Story 1.14 implementation when the complete workflow is executed with real repositories.

### File List
**Created:**
- CLAUDE_ANALYSIS_GUIDE.md: Comprehensive analysis generation guide (270 lines)

## QA Results
_Populated by QA Agent after implementation_