============================= test session starts =============================
platform win32 -- Python 3.12.11, pytest-8.4.2, pluggy-1.6.0 -- C:\Users\drewa\My Drive\Claude Code Workspace\Software Projects\gitingest-agent-project\.venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: c:\Users\drewa\My Drive\Claude Code Workspace\Software Projects\gitingest-agent-project
configfile: pyproject.toml
testpaths: tests
plugins: cov-7.0.0, mock-3.15.1
collecting ... collected 190 items

tests/test_cli.py::TestCheckSizeCommand::test_check_size_command_under_threshold PASSED [  0%]
tests/test_cli.py::TestCheckSizeCommand::test_check_size_command_over_threshold PASSED [  1%]
tests/test_cli.py::TestCheckSizeCommand::test_check_size_command_at_threshold PASSED [  1%]
tests/test_cli.py::TestCheckSizeCommand::test_check_size_invalid_url PASSED [  2%]
tests/test_cli.py::TestCheckSizeCommand::test_check_size_network_error PASSED [  2%]
tests/test_cli.py::TestCheckSizeCommand::test_check_size_gitingest_timeout PASSED [  3%]
tests/test_cli.py::TestCheckSizeCommand::test_check_size_missing_url PASSED [  3%]
tests/test_cli.py::TestCheckSizeCommand::test_check_size_help PASSED     [  4%]
tests/test_cli.py::TestGitingestAgentGroup::test_gitingest_agent_help PASSED [  4%]
tests/test_cli.py::TestGitingestAgentGroup::test_gitingest_agent_no_command PASSED [  5%]
tests/test_cli.py::TestCLIIntegration::test_check_size_full_flow_small_repo PASSED [  5%]
tests/test_cli.py::TestCLIIntegration::test_check_size_full_flow_large_repo PASSED [  6%]
tests/test_cli.py::TestCLIIntegration::test_check_size_full_flow_error PASSED [  6%]
tests/test_cli.py::TestExtractFullCommand::test_extract_full_command_success PASSED [  7%]
tests/test_cli.py::TestExtractFullCommand::test_extract_full_displays_output_path PASSED [  7%]
tests/test_cli.py::TestExtractFullCommand::test_extract_full_gitingest_error PASSED [  8%]
tests/test_cli.py::TestExtractFullCommand::test_extract_full_storage_error PASSED [  8%]
tests/test_cli.py::TestExtractFullCommand::test_extract_full_validation_error PASSED [  9%]
tests/test_cli.py::TestExtractFullCommand::test_extract_full_missing_url PASSED [ 10%]
tests/test_cli.py::TestExtractFullCommand::test_extract_full_help PASSED [ 10%]
tests/test_cli.py::TestExtractTreeCommand::test_extract_tree_command_success PASSED [ 11%]
tests/test_cli.py::TestExtractTreeCommand::test_extract_tree_displays_tree_content PASSED [ 11%]
tests/test_cli.py::TestExtractTreeCommand::test_extract_tree_gitingest_error PASSED [ 12%]
tests/test_cli.py::TestExtractTreeCommand::test_extract_tree_storage_error PASSED [ 12%]
tests/test_cli.py::TestExtractTreeCommand::test_extract_tree_help PASSED [ 13%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_docs_type PASSED [ 13%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_installation_type PASSED [ 14%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_code_type PASSED [ 14%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_auto_type PASSED [ 15%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_missing_type_option PASSED [ 15%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_invalid_type_value PASSED [ 16%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_gitingest_error PASSED [ 16%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_storage_error PASSED [ 17%]
tests/test_cli.py::TestExtractSpecificCommand::test_extract_specific_help PASSED [ 17%]
tests/test_cli.py::TestTokenOverflowPrevention::test_extract_specific_under_threshold_no_prompt PASSED [ 18%]
tests/test_cli.py::TestTokenOverflowPrevention::test_extract_specific_overflow_detected_proceed PASSED [ 18%]
tests/test_cli.py::TestTokenOverflowPrevention::test_extract_specific_overflow_narrow_once PASSED [ 19%]
tests/test_cli.py::TestTokenOverflowPrevention::test_extract_specific_overflow_narrow_multiple_times PASSED [ 20%]
tests/test_cli.py::TestTokenOverflowPrevention::test_extract_specific_at_threshold_no_prompt PASSED [ 20%]
tests/test_cli.py::TestTokenOverflowPrevention::test_extract_specific_just_over_threshold PASSED [ 21%]
tests/test_cli.py::TestTokenOverflowPrevention::test_extract_specific_overflow_invalid_choice_then_proceed PASSED [ 21%]
tests/test_exceptions.py::TestBaseException::test_base_exception_instantiation PASSED [ 22%]
tests/test_exceptions.py::TestBaseException::test_base_exception_can_be_raised PASSED [ 22%]
tests/test_exceptions.py::TestBaseException::test_base_exception_inherits_from_exception PASSED [ 23%]
tests/test_exceptions.py::TestGitIngestError::test_git_ingest_error_inheritance PASSED [ 23%]
tests/test_exceptions.py::TestGitIngestError::test_git_ingest_error_message_preserved PASSED [ 24%]
tests/test_exceptions.py::TestGitIngestError::test_git_ingest_error_can_be_caught PASSED [ 24%]
tests/test_exceptions.py::TestValidationError::test_validation_error_inheritance PASSED [ 25%]
tests/test_exceptions.py::TestValidationError::test_validation_error_message_preserved PASSED [ 25%]
tests/test_exceptions.py::TestValidationError::test_validation_error_can_be_caught PASSED [ 26%]
tests/test_exceptions.py::TestStorageError::test_storage_error_inheritance PASSED [ 26%]
tests/test_exceptions.py::TestStorageError::test_storage_error_message_preserved PASSED [ 27%]
tests/test_exceptions.py::TestStorageError::test_storage_error_can_be_caught PASSED [ 27%]
tests/test_exceptions.py::TestWorkflowError::test_workflow_error_inheritance PASSED [ 28%]
tests/test_exceptions.py::TestWorkflowError::test_workflow_error_message_preserved PASSED [ 28%]
tests/test_exceptions.py::TestWorkflowError::test_workflow_error_can_be_caught PASSED [ 29%]
tests/test_exceptions.py::TestExceptionHierarchy::test_catch_base_catches_all_specialized PASSED [ 30%]
tests/test_exceptions.py::TestExceptionHierarchy::test_specialized_exceptions_distinct PASSED [ 30%]
tests/test_exceptions.py::TestExceptionHierarchy::test_exception_isinstance_checks PASSED [ 31%]
tests/test_exceptions.py::TestExceptionUsagePatterns::test_exception_with_empty_message PASSED [ 31%]
tests/test_exceptions.py::TestExceptionUsagePatterns::test_exception_with_multiline_message PASSED [ 32%]
tests/test_exceptions.py::TestExceptionUsagePatterns::test_exception_with_formatted_message PASSED [ 32%]
tests/test_exceptions.py::TestExceptionUsagePatterns::test_re_raising_exception PASSED [ 33%]
tests/test_extractor.py::TestRunGitingest::test_run_gitingest_success PASSED [ 33%]
tests/test_extractor.py::TestRunGitingest::test_run_gitingest_timeout PASSED [ 34%]
tests/test_extractor.py::TestRunGitingest::test_run_gitingest_custom_timeout PASSED [ 34%]
tests/test_extractor.py::TestRunGitingest::test_run_gitingest_repository_not_found PASSED [ 35%]
tests/test_extractor.py::TestRunGitingest::test_run_gitingest_authentication_error PASSED [ 35%]
tests/test_extractor.py::TestRunGitingest::test_run_gitingest_network_error PASSED [ 36%]
tests/test_extractor.py::TestRunGitingest::test_run_gitingest_generic_error PASSED [ 36%]
tests/test_extractor.py::TestExtractFull::test_extract_full_success PASSED [ 37%]
tests/test_extractor.py::TestExtractFull::test_extract_full_gitingest_args PASSED [ 37%]
tests/test_extractor.py::TestExtractFull::test_extract_full_timeout_value PASSED [ 38%]
tests/test_extractor.py::TestExtractFull::test_extract_full_storage_error PASSED [ 38%]
tests/test_extractor.py::TestExtractTree::test_extract_tree_success PASSED [ 39%]
tests/test_extractor.py::TestExtractTree::test_extract_tree_gitingest_args PASSED [ 40%]
tests/test_extractor.py::TestExtractTree::test_extract_tree_timeout_value PASSED [ 40%]
tests/test_extractor.py::TestExtractSpecific::test_extract_specific_docs PASSED [ 41%]
tests/test_extractor.py::TestExtractSpecific::test_extract_specific_installation PASSED [ 41%]
tests/test_extractor.py::TestExtractSpecific::test_extract_specific_code PASSED [ 42%]
tests/test_extractor.py::TestExtractSpecific::test_extract_specific_auto PASSED [ 42%]
tests/test_extractor.py::TestExtractSpecific::test_extract_specific_filter_args PASSED [ 43%]
tests/test_extractor.py::TestExtractSpecific::test_extract_specific_invalid_type PASSED [ 43%]
tests/test_extractor.py::TestIntegration::test_full_extraction_workflow PASSED [ 44%]
tests/test_extractor.py::TestIntegration::test_selective_extraction_workflow PASSED [ 44%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_basic PASSED [ 45%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_with_git_suffix PASSED [ 45%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_with_trailing_slash PASSED [ 46%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_with_trailing_slash_and_git PASSED [ 46%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_sanitization PASSED [ 47%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_with_underscore PASSED [ 47%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_with_numbers PASSED [ 48%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_invalid_empty_url PASSED [ 48%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_invalid_none PASSED [ 49%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_invalid_format PASSED [ 50%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_http_protocol PASSED [ 50%]
tests/test_storage.py::TestParseRepoName::test_parse_repo_name_github_enterprise PASSED [ 51%]
tests/test_storage.py::TestEnsureDataDirectory::test_ensure_data_directory_creates_path PASSED [ 51%]
tests/test_storage.py::TestEnsureDataDirectory::test_ensure_data_directory_returns_absolute PASSED [ 52%]
tests/test_storage.py::TestEnsureDataDirectory::test_ensure_data_directory_idempotent PASSED [ 52%]
tests/test_storage.py::TestEnsureDataDirectory::test_ensure_data_directory_multiple_repos PASSED [ 53%]
tests/test_storage.py::TestEnsureDataDirectory::test_ensure_data_directory_with_hyphen PASSED [ 53%]
tests/test_storage.py::TestEnsureDataDirectory::test_ensure_data_directory_with_underscore PASSED [ 54%]
tests/test_storage.py::TestEnsureAnalyzeDirectory::test_ensure_analyze_directory_installation PASSED [ 54%]
tests/test_storage.py::TestEnsureAnalyzeDirectory::test_ensure_analyze_directory_workflow PASSED [ 55%]
tests/test_storage.py::TestEnsureAnalyzeDirectory::test_ensure_analyze_directory_architecture PASSED [ 55%]
tests/test_storage.py::TestEnsureAnalyzeDirectory::test_ensure_analyze_directory_custom PASSED [ 56%]
tests/test_storage.py::TestEnsureAnalyzeDirectory::test_ensure_analyze_directory_all_types PASSED [ 56%]
tests/test_storage.py::TestEnsureAnalyzeDirectory::test_ensure_analyze_directory_returns_absolute PASSED [ 57%]
tests/test_storage.py::TestEnsureAnalyzeDirectory::test_ensure_analyze_directory_idempotent PASSED [ 57%]
tests/test_storage.py::TestErrorHandling::test_ensure_data_directory_permission_error PASSED [ 58%]
tests/test_storage.py::TestErrorHandling::test_ensure_data_directory_os_error PASSED [ 58%]
tests/test_storage.py::TestErrorHandling::test_ensure_analyze_directory_permission_error PASSED [ 59%]
tests/test_storage.py::TestErrorHandling::test_ensure_analyze_directory_os_error PASSED [ 60%]
tests/test_storage.py::TestIntegration::test_full_workflow_data_then_analyze PASSED [ 60%]
tests/test_storage.py::TestIntegration::test_multiple_repos_multiple_analyses PASSED [ 61%]
tests/test_storage.py::TestIntegration::test_parse_and_ensure_combined PASSED [ 61%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_creates_file PASSED [ 62%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_includes_metadata PASSED [ 62%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_all_types PASSED [ 63%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_returns_absolute_path PASSED [ 63%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_overwrites_existing PASSED [ 64%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_metadata_format PASSED [ 64%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_date_included PASSED [ 65%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_storage_error_directory_creation PASSED [ 65%]
tests/test_storage.py::TestSaveAnalysis::test_save_analysis_storage_error_file_write PASSED [ 66%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_under_threshold PASSED [ 66%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_over_threshold PASSED [ 67%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_at_threshold PASSED [ 67%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_fallback_estimation PASSED [ 68%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_small_repo_fallback PASSED [ 68%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_timeout PASSED [ 69%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_network_error PASSED [ 70%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_repository_not_found PASSED [ 70%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_authentication_error PASSED [ 71%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_generic_error PASSED [ 71%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_invalid_url PASSED [ 72%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_timeout_value PASSED [ 72%]
tests/test_token_counter.py::TestCountTokens::test_count_tokens_check_flag PASSED [ 73%]
tests/test_token_counter.py::TestCountTokensFromFile::test_count_tokens_from_file_basic PASSED [ 73%]
tests/test_token_counter.py::TestCountTokensFromFile::test_count_tokens_from_file_large PASSED [ 74%]
tests/test_token_counter.py::TestCountTokensFromFile::test_count_tokens_from_file_small PASSED [ 74%]
tests/test_token_counter.py::TestCountTokensFromFile::test_count_tokens_from_file_empty PASSED [ 75%]
tests/test_token_counter.py::TestCountTokensFromFile::test_count_tokens_from_file_not_found PASSED [ 75%]
tests/test_token_counter.py::TestCountTokensFromFile::test_count_tokens_from_file_path_object PASSED [ 76%]
tests/test_token_counter.py::TestCountTokensFromFile::test_count_tokens_from_file_multiline PASSED [ 76%]
tests/test_token_counter.py::TestShouldExtractFull::test_should_extract_full_under_threshold PASSED [ 77%]
tests/test_token_counter.py::TestShouldExtractFull::test_should_extract_full_over_threshold PASSED [ 77%]
tests/test_token_counter.py::TestShouldExtractFull::test_should_extract_full_exactly_at_threshold PASSED [ 78%]
tests/test_token_counter.py::TestShouldExtractFull::test_should_extract_full_just_below_threshold PASSED [ 78%]
tests/test_token_counter.py::TestShouldExtractFull::test_should_extract_full_custom_threshold PASSED [ 79%]
tests/test_token_counter.py::TestShouldExtractFull::test_should_extract_full_zero_threshold PASSED [ 80%]
tests/test_token_counter.py::TestShouldExtractFull::test_should_extract_full_very_large_threshold PASSED [ 80%]
tests/test_token_counter.py::TestIntegration::test_full_workflow_small_repo PASSED [ 81%]
tests/test_token_counter.py::TestIntegration::test_full_workflow_large_repo PASSED [ 81%]
tests/test_token_counter.py::TestIntegration::test_recheck_workflow PASSED [ 82%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_valid_https PASSED [ 82%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_valid_http PASSED [ 83%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_with_trailing_slash PASSED [ 83%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_with_git_suffix PASSED [ 84%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_with_trailing_slash_and_git PASSED [ 84%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_with_hyphens PASSED [ 85%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_with_underscores PASSED [ 85%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_with_numbers PASSED [ 86%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_invalid_empty PASSED [ 86%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_invalid_none PASSED [ 87%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_invalid_format PASSED [ 87%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_non_github_domain PASSED [ 88%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_missing_repo PASSED [ 88%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_missing_owner PASSED [ 89%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_extra_path_components PASSED [ 90%]
tests/test_workflow.py::TestValidateGithubUrl::test_validate_github_url_special_characters PASSED [ 90%]
tests/test_workflow.py::TestFormatTokenCount::test_format_token_count_small PASSED [ 91%]
tests/test_workflow.py::TestFormatTokenCount::test_format_token_count_thousands PASSED [ 91%]
tests/test_workflow.py::TestFormatTokenCount::test_format_token_count_millions PASSED [ 92%]
tests/test_workflow.py::TestFormatTokenCount::test_format_token_count_zero PASSED [ 92%]
tests/test_workflow.py::TestFormatTokenCount::test_format_token_count_threshold PASSED [ 93%]
tests/test_workflow.py::TestGetFiltersForType::test_get_filters_for_type_docs PASSED [ 93%]
tests/test_workflow.py::TestGetFiltersForType::test_get_filters_for_type_installation PASSED [ 94%]
tests/test_workflow.py::TestGetFiltersForType::test_get_filters_for_type_code PASSED [ 94%]
tests/test_workflow.py::TestGetFiltersForType::test_get_filters_for_type_auto PASSED [ 95%]
tests/test_workflow.py::TestGetFiltersForType::test_get_filters_for_type_invalid PASSED [ 95%]
tests/test_workflow.py::TestGetFiltersForType::test_get_filters_for_type_case_sensitive PASSED [ 96%]
tests/test_workflow.py::TestGetFiltersForType::test_get_filters_for_type_returns_copy PASSED [ 96%]
tests/test_workflow.py::TestFilterPatternsStructure::test_filter_patterns_all_types_present PASSED [ 97%]
tests/test_workflow.py::TestFilterPatternsStructure::test_filter_patterns_all_have_include_exclude PASSED [ 97%]
tests/test_workflow.py::TestFilterPatternsStructure::test_filter_patterns_include_not_empty PASSED [ 98%]
tests/test_workflow.py::TestFilterPatternsStructure::test_filter_patterns_installation_no_exclude PASSED [ 98%]
tests/test_workflow.py::TestIntegration::test_full_workflow_url_to_filters PASSED [ 99%]
tests/test_workflow.py::TestIntegration::test_all_content_types_accessible PASSED [100%]

=============================== tests coverage ================================
______________ coverage: platform win32, python 3.12.11-final-0 _______________

Name                          Stmts   Miss  Cover   Missing
-----------------------------------------------------------
cli.py                          113      5    96%   131-132, 227-228, 238
exceptions.py                    10      0   100%
extractor.py                     55      4    93%   127-128, 179-180
main.py                           4      4     0%   1-6
storage.py                       49      1    98%   52
tests\__init__.py                 0      0   100%
tests\test_cli.py               333      0   100%
tests\test_exceptions.py        105      0   100%
tests\test_extractor.py         255      0   100%
tests\test_storage.py           267      0   100%
tests\test_token_counter.py     176      0   100%
tests\test_workflow.py          179      0   100%
token_counter.py                 32      0   100%
workflow.py                      23      0   100%
-----------------------------------------------------------
TOTAL                          1601     14    99%
============================= 190 passed in 0.46s =============================
